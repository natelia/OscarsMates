<header class="site-header">
  <div class="container">
    <div class="header-inner">
      <%= link_to root_path, class: "logo" do %>
        <i class="bi bi-trophy-fill"></i>
        <span>OscarsMates</span>
      <% end %>

      <button class="menu-toggle d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
        <i class="bi bi-list"></i>
      </button>

      <nav class="main-nav collapse d-lg-flex" id="mainNav">
        <% selected_year = current_year || default_year %>

        <ul class="nav-links">
          <% if available_years.any? %>
            <li class="dropdown">
              <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                <%= selected_year %> Oscars
              </a>
              <ul class="dropdown-menu">
                <% available_years.each do |year| %>
                  <li><%= link_to year, movies_path(year: year), class: "dropdown-item #{'active' if year == selected_year}" %></li>
                <% end %>
              </ul>
            </li>
          <% end %>
          <li><%= link_to "Mates", users_path, class: "nav-link" %></li>
          <li><%= link_to "Stats", stats_users_path(year: selected_year), class: "nav-link" %></li>
          <li><%= link_to "Categories", categories_path(year: selected_year), class: "nav-link" %></li>
        </ul>

        <div class="header-actions">
          <% if current_user %>
            <div class="dropdown">
              <a href="#" class="user-menu dropdown-toggle" data-bs-toggle="dropdown">
                <span class="avatar"><%= current_user.name[0].upcase %></span>
                <span class="d-none d-md-inline"><%= current_user.name %></span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><%= link_to "Profile", user_path(current_user), class: "dropdown-item" %></li>
                <li><%= link_to "Settings", edit_user_path(current_user), class: "dropdown-item" %></li>
                <li><hr class="dropdown-divider"></li>
                <li><%= button_to "Sign Out", destroy_session_path, method: :delete, class: "dropdown-item", data: { turbo_method: :delete } %></li>
              </ul>
            </div>
          <% else %>
            <%= link_to "Sign In", signin_path, class: "btn-secondary-minimal" %>
            <%= link_to "Sign Up", new_user_path, class: "btn-primary-minimal" %>
          <% end %>
        </div>
      </nav>
    </div>
  </div>
</header>
