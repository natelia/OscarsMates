<header class="header bg-white py-3 border-bottom">
  <div class="container d-flex justify-content-between align-items-center">
    <h1 class="mb-0" style="font-size: 2rem; font-weight: 600;">
      <%= link_to 'Oscars Mates', root_path, style: "color: #333; text-decoration: none;" %>
    </h1>

    <nav class="d-flex align-items-center">
      <ul class="nav">
        <% selected_year = current_year || default_year %>
        <% if available_years.any? %>
          <!-- Year Selector Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-dark" href="#" id="yearDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #333; text-decoration: none;">
              <i class="bi bi-calendar"></i> <%= selected_year %> Oscars
            </a>
            <ul class="dropdown-menu" aria-labelledby="yearDropdown">
              <% available_years.each do |year| %>
                <li>
                  <%= link_to "#{year} Oscars", movies_path(year: year), class: "dropdown-item #{'active' if year == selected_year}" %>
                </li>
              <% end %>
            </ul>
          </li>
        <% end %>

        <li class="nav-item">
          <%= link_to users_path, class: "nav-link text-dark", style: "color: #333; text-decoration: none;" do %>
            <i class="bi bi-people"></i> Mates
          <% end %>
        </li>

        <li class="nav-item">
          <%= link_to stats_users_path(year: selected_year), class: "nav-link stats-button", style: "color: #333; text-decoration: none;" do %>
            <i class="bi bi-bar-chart"></i> Stats
          <% end %>
        </li>

        <% if current_user&.admin? %>
          <li class="nav-item">
            <%= link_to raw("<i class='bi bi-list-ul'></i> Manage Categories"), categories_path(year: selected_year), class: "nav-link text-dark", style: "color: #333; text-decoration: none;" %>
          </li>
        <% else %>
          <li class="nav-item">
            <%= link_to 'Categories', categories_path(year: selected_year), class: 'nav-link text-dark', style: "color: #333; text-decoration: none;" %>
          </li>
        <% end %>

        <% if current_user %>
          <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #333;">
            <i class="bi bi-person-circle"></i> <%= current_user.name %>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
            <li>
              <%= link_to "My Profile", user_path(current_user), class: "dropdown-item", style: "color: #333; text-decoration: none;" %>
            </li>
            <li>
              <%= link_to "Account Settings", edit_user_path(current_user), class: "dropdown-item", style: "color: #333; text-decoration: none;" %>
            </li>
            <li>
              <%= button_to "Sign Out", destroy_session_path, method: :delete, class: "dropdown-item text-danger", data: { turbo_method: :delete }, style: "color: #333; text-decoration: none;" %>
            </li>
          </ul>
        </li>
        <% else %>
          <li class="nav-item">
            <%= link_to signin_path, class: "nav-link text-dark", style: "color: #333; text-decoration: none;" do %>
              <i class="bi bi-box-arrow-in-right"></i> Sign In
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to new_user_path, class: "nav-link text-dark", style: "color: #333; text-decoration: none;" do %>
              <i class="bi bi-person-plus"></i> Sign Up
            <% end %>
          </li>
        <% end %>
      </ul>
    </nav>
  </div>
</header>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
.header {
  position: flexy;
  top: 20px;
  z-index: 1000;
  width: 100%;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  margin-top: 10px;
  padding: 15px;
}

.header .container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nav {
  display: flex;
  justify-content: flex-end;
  flex: 1;
}

.nav-link {
  padding: 0 20px;
  font-size: 1.1rem;
  transition: background-color 0.3s, color 0.3s;
}

.nav-link:hover {
  background-color: e0e0e0;
  color: 007bff;
}

</style>