<main class="categories-page">
  <div class="container py-5">
    <div class="page-header mb-4">
      <h1 class="page-title"><%= @category.name %></h1>
      <p class="text-secondary"><%= pluralize(@movies.count, 'movie') %> in this category</p>
    </div>

    <% if @movies.any? %>
      <div class="movies-grid">
        <% @movies.each_with_index do |movie, index| %>
          <div class="animate-fade-in-up animate-delay-<%= [index + 1, 12].min %>">
            <%= render 'movies/movie_card', movie: movie, review: @user_reviews[movie.id] %>
          </div>
        <% end %>
      </div>
    <% else %>
      <%= render 'shared/empty_state',
          icon: 'film',
          title: 'No movies in this category',
          message: 'There are no movies for this category yet.' %>
    <% end %>

    <div class="d-flex gap-2 mt-4">
      <%= link_to categories_path(year: current_year), class: 'btn btn-outline-oscar' do %>
        <i class="bi bi-arrow-left me-1"></i> Back to Categories
      <% end %>
      <% if current_user_admin? %>
        <%= link_to edit_category_path(@category, year: current_year), class: 'btn btn-outline-oscar' do %>
          <i class="bi bi-pencil me-1"></i> Edit Category
        <% end %>
      <% end %>
    </div>
  </div>
</main>
